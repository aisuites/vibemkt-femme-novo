{% comment %}
COMPONENTE REUTILIZ√ÅVEL: Logo Upload Widget
Exibe preview de logotipo existente ou √°rea de upload

Par√¢metros:
  - logo: Objeto Logo (opcional) - Se existir, mostra preview
  - widget_id: ID √∫nico do widget (padr√£o: 'logo-widget')
  - show_label: Mostrar label "Logotipo" (padr√£o: True)
  - compact: Modo compacto para header (padr√£o: False)

Uso:
  {% include 'components/logo_upload_widget.html' with logo=primary_logo widget_id='perfil-logo' compact=True %}
{% endcomment %}

{% load static %}

<div class="logo-upload-widget {% if compact %}logo-upload-widget-compact{% endif %}" id="{{ widget_id|default:'logo-widget' }}">
  {% if show_label|default:True %}
  <label class="logo-upload-label">Logotipo</label>
  {% endif %}
  
  {% if logo %}
  {# Preview de logotipo existente #}
  <div class="logo-preview-container">
    <div class="logo-preview-image">
      <img src="#" 
           alt="{{ logo.name }}" 
           data-lazy-load="{{ logo.s3_key }}"
           class="logo-img">
    </div>
    <div class="logo-preview-actions">
      <button type="button" 
              class="btn btn-sm btn-danger" 
              data-action="remove-logo"
              data-logo-id="{{ logo.id }}"
              data-widget-id="{{ widget_id|default:'logo-widget' }}">
        Remover logotipo
      </button>
    </div>
  </div>
  {% else %}
  {# √Årea de upload (sem logotipo) #}
  <div class="logo-upload-empty">
    <div class="logo-upload-placeholder">
      <div class="logo-upload-icon">üñºÔ∏è</div>
      <p class="logo-upload-text">Logotipo</p>
      <p class="logo-upload-hint">Arraste e solte aqui, ou</p>
      <button type="button" 
              class="btn btn-primary btn-sm" 
              data-action="select-logo"
              data-widget-id="{{ widget_id|default:'logo-widget' }}">
        Escolher arquivo
      </button>
      <p class="logo-upload-format">PNG/JPG ‚Ä¢ at√© 5 MB</p>
    </div>
  </div>
  {% endif %}
  
  {# Input file oculto #}
  <input type="file" 
         id="{{ widget_id|default:'logo-widget' }}-input" 
         accept="image/png,image/jpeg,image/jpg"
         class="hidden-field"
         data-upload-type="logo"
         data-widget-id="{{ widget_id|default:'logo-widget' }}">
</div>
